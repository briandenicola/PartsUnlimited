# Getting Started#

## Set up your Windows machine
1. Create a Azure Generation VM 
    - SKU - Standard_D8S_v3
    - OS  - Windows 2022
1. Install [Visual Studio 2013 Update 5 or later (up through Visual Studio 2019)](http://www.visualstudio.com)
1. Install [chocolatey](https://community.chocolatey.org/install.ps1')))
1. Install the following
    - choco install git
    - choco install powershell-core
    - choco install netfx-4.8.1
    - choco install azure-cli
    - choco install docker-desktop
    - choco install kubernetes-helm
    - choco install terraform
    - choco install go-task
    - choco install nuget.commandline
1. Add `C:\Program Files\Microsoft Visual Studio\2022\Community\MSBuild\Current\Bin` to Path
1. `git clone https://github.com/briandenicola/PartsUnlimited`

## Create Azure Resources
1. Setup an Azure Container Registry
1. Setup an Azure SQL Database
1. az aks install-cli

### Setup AKS Cluster
1. az login 
1. cd infrastructure\aks\windows2022
1. `task up -- southcentralus`

## Build the source code
1. az acr login -n partsunlimitedacr.azurecr.io
1. `.\build.ps1 -ACR partsunlimitedacr.azurecr.io`

## Deploy the source code
1. Update deploy\values.yaml
    - replicaCount: 1
    - namespace: default
    - db.connection_string: The connection string to the Azure SQL database
    - image.repository: partsunlimitedacr.azurecr.io
    - image.app_name: partsunlimited
    - image.tag: The UUID generated by .\build.ps1
1. cd deploy
1. `helm upgrade -i parts .`